const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdfMerge-DXtLP7Xx.js","assets/pdf-libs-BqoGqu1a.js","assets/commonjs-helpers-Cpj98o6Y.js","assets/vite-preload-helper-ckwbz45p.js"])))=>i.map(i=>d[i]);
import{_ as he}from"./vite-preload-helper-ckwbz45p.js";import{i as K,s as B,r as ue,j as l,D as fe,q as pe,F as be,G as ye,L as O,B as G,aL as xe,n as $}from"./index-NZ6jJLfQ.js";import{C as Y}from"./checkbox-BsRNEGV1.js";import{a as re,e as Se}from"./artistPdfExport-DnsKQk1F.js";import{fetchLogoUrl as Q}from"./logoUtils-D2o1jUVg.js";import{D as Z}from"./download-C1rVE0-J.js";import{a as V}from"./lazyPdf-xVUlxKNu.js";import{P as oe,S as ae,r as L}from"./pdf-libs-BqoGqu1a.js";import{mergePDFs as _e}from"./pdfMerge-DXtLP7Xx.js";import{getWeatherForJob as we}from"./weatherApi-BatwQpQy.js";const ne=async m=>{const{jsPDF:k,autoTable:h}=await V();return new Promise((e,c)=>{try{const a=new k({orientation:"landscape"}),t=a.internal.pageSize.width,u=a.internal.pageSize.height,_=K(new Date,"dd/MM/yyyy");a.setFillColor(125,1,1),a.rect(0,0,t,20,"F"),(m.logoUrl?new Promise((w,y)=>{const p=new Image;p.crossOrigin="Anonymous",p.onload=()=>{try{const g=p.width/p.height,D=Math.min(18,p.height),s=D*g;a.addImage(p,"JPEG",5,1,s,D),w()}catch{w()}},p.onerror=v=>{w()},p.src=m.logoUrl}):Promise.resolve()).then(()=>{a.setFontSize(14),a.setTextColor(255,255,255),a.text(`${m.jobTitle} - Shifts Schedule`,t/2,12,{align:"center"}),a.text(K(new Date(m.date),"dd/MM/yyyy"),t/2,18,{align:"center"});const w={};m.shifts.forEach(p=>{const v=p.department||"General";w[v]||(w[v]=[]),w[v].push(p)});let y=25;for(const[p,v]of Object.entries(w)){a.setFontSize(12),a.setTextColor(125,1,1),a.text(`${p} Department`,14,y),y+=8,v.sort((D,s)=>{const N=D.start_time,R=s.start_time;return N.localeCompare(R)});const g=v.map(D=>{const N=(D.assignments||[]).map(R=>{var q,r;let F;return R.external_technician_name?F=R.external_technician_name:(q=R.profiles)!=null&&q.first_name&&((r=R.profiles)!=null&&r.last_name)?F=`${R.profiles.first_name} ${R.profiles.last_name}`:F="Unnamed Technician",`${F} (${R.role||"N/A"})`}).join(`
`);return[D.name,D.stage?`Stage ${D.stage}`:"N/A",`${D.start_time.substring(0,5)} - ${D.end_time.substring(0,5)}`,N||"None"]});h(a,{startY:y,head:[["Shift Name","Stage","Time","Assigned Technicians"]],body:g,theme:"grid",styles:{fontSize:9,cellPadding:3,overflow:"linebreak",lineWidth:.1},headStyles:{fillColor:[125,1,1],textColor:[255,255,255],fontSize:9,fontStyle:"bold",halign:"left",cellPadding:4},columnStyles:{0:{cellWidth:40},1:{cellWidth:30},2:{cellWidth:30},3:{cellWidth:"auto"}}}),y=a.lastAutoTable.finalY+15,y>u-40&&Object.entries(w).indexOf([p,v])<Object.entries(w).length-1&&(a.addPage(),y=20)}a.setFontSize(8),a.setTextColor(51,51,51),a.text(`Generated: ${_}`,t-10,u-10,{align:"right"});try{const p="/sector pro logo.png",v=new Image;v.onload=()=>{try{const s=30/(v.width/v.height);a.addImage(v,"PNG",t/2-30/2,u-s-10,30,s);const N=a.output("blob");e(N)}catch{const D=a.output("blob");e(D)}},v.onerror=g=>{const D=a.output("blob");e(D)},v.src=p}catch{const v=a.output("blob");e(v)}}).catch(w=>{c(w)})}catch(a){c(a)}})},ee=async m=>{var _;const{jsPDF:k,autoTable:h}=await V(),e=new k,c="#2563eb",a="#1f2937",t="#dc2626";let u=30;if(m.logoUrl)try{const f=await fetch(m.logoUrl);if(f.ok){const w=await f.blob(),y=await new Promise(p=>{const v=new FileReader;v.onloadend=()=>p(v.result),v.readAsDataURL(w)});e.addImage(y,"JPEG",20,10,30,15),u=40}}catch{}if(e.setFontSize(24),e.setTextColor(c),e.setFont("helvetica","bold"),e.text("Missing Rider Report",20,u),u+=15,e.setFontSize(16),e.setTextColor(a),e.setFont("helvetica","normal"),e.text(m.jobTitle,20,u),u+=10,e.setFontSize(10),e.setTextColor("#6b7280"),e.text(`Generated on: ${K(new Date,"PPP")}`,20,u),u+=20,e.setFontSize(12),e.setTextColor(t),e.setFont("helvetica","bold"),e.text("The following artists have missing technical riders:",20,u),u+=15,m.artists.length===0)e.setFontSize(12),e.setTextColor("#059669"),e.setFont("helvetica","normal"),e.text("All artists have complete technical riders!",20,u);else{const f=m.artists.map(v=>{var N,R;let g="TBA";try{if(v.date){const F=new Date(v.date);isNaN(F.getTime())||(g=K(F,"EEE, MMM d"))}}catch{}const D=((N=v.showTime)==null?void 0:N.start)||"-",s=((R=v.showTime)==null?void 0:R.end)||"-";return[v.name,`Stage ${v.stage}`,g,`${D} - ${s}`]});h(e,{startY:u,head:[["Artist Name","Stage","Date","Show Time"]],body:f,theme:"grid",headStyles:{fillColor:[125,1,1],textColor:[255,255,255],fontStyle:"bold",fontSize:11},bodyStyles:{textColor:[31,41,55],fontSize:10},alternateRowStyles:{fillColor:[254,242,242]},margin:{left:20,right:20},columnStyles:{0:{cellWidth:60},1:{cellWidth:30},2:{cellWidth:40},3:{cellWidth:50}}});const y=(((_=e.lastAutoTable)==null?void 0:_.finalY)||u)+20;e.setFontSize(11),e.setTextColor(a),e.setFont("helvetica","bold"),e.text("Action Required:",20,y),e.setFont("helvetica","normal"),e.setFontSize(10),["• Contact the listed artists to request their technical riders","• Follow up with artist management or booking agents","• Ensure all riders are received before production planning","• Update the system once riders are received"].forEach((v,g)=>{e.text(v,25,y+10+g*6)})}return e.setFontSize(8),e.setTextColor("#9ca3af"),e.text("Page 1 of 1 - Generated by Festival Management System",20,280),new Promise(f=>{f(e.output("blob"))})},se=m=>{if(!m||m.length===0)return"";const k=m.map(e=>e.provided_by||"festival"),h=[...new Set(k)];return h.length===1?h[0]==="festival"?"Festival":"Band":"Mixed"},ie=async m=>{const{jsPDF:k,autoTable:h}=await V(),e=new k({orientation:"landscape",unit:"mm",format:"a4"}),c=e.internal.pageSize.getWidth(),a=e.internal.pageSize.getHeight();if(m.logoUrl)try{const w=await(await fetch(m.logoUrl)).blob(),y=URL.createObjectURL(w),p=40;e.addImage(y,"PNG",c-p-15,10,p,15),URL.revokeObjectURL(y)}catch{}e.setFontSize(18),e.text(`${m.jobTitle} - Artist RF & IEM Overview`,15,20);const u=m.artists.filter(f=>f.wirelessSystems&&f.wirelessSystems.length>0||f.iemSystems&&f.iemSystems.length>0).map(f=>{const w=f.wirelessSystems.reduce((q,r)=>q+(r.quantity_hh||0),0),y=f.wirelessSystems.reduce((q,r)=>q+(r.quantity_bp||0),0),p=f.iemSystems.reduce((q,r)=>q+(r.quantity_hh||0),0),v=f.iemSystems.reduce((q,r)=>q+(r.quantity_bp||0),0),g=[...new Set(f.wirelessSystems.map(q=>q.model))].join(", "),D=[...new Set(f.wirelessSystems.filter(q=>q.band).map(q=>q.band))].join(", "),s=[...new Set(f.iemSystems.map(q=>q.model))].join(", "),N=[...new Set(f.iemSystems.filter(q=>q.band).map(q=>q.band))].join(", "),R=se(f.wirelessSystems),F=se(f.iemSystems);return[f.name,`Stage ${f.stage}`,R,g,D,w,y,F,s,N,p,v]});return h(e,{head:[["Artist Name","Stage","RF Provided By","RF Models","RF Bands","Handhelds","Bodypacks","IEM Provided By","IEM Models","IEM Bands","IEM Channels","IEM Bodypacks"]],body:u,startY:30,headStyles:{fillColor:[125,1,1],textColor:[255,255,255],fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,245]},styles:{fontSize:9,cellPadding:3,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:40},1:{cellWidth:15},2:{cellWidth:22},3:{cellWidth:30},4:{cellWidth:25},5:{cellWidth:15},6:{cellWidth:15},7:{cellWidth:22},8:{cellWidth:30},9:{cellWidth:25},10:{cellWidth:15},11:{cellWidth:15}}}),await(async()=>new Promise(f=>{const w=e.getNumberOfPages();for(let p=1;p<=w;p++){e.setPage(p),e.setFontSize(8),e.setTextColor(100);const v=new Date().toLocaleDateString();e.text(`Generated on ${v}`,15,a-10),e.text(`Page ${p} of ${w}`,c-25,a-10)}const y=new Image;y.crossOrigin="anonymous",y.src="/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png",y.onload=()=>{const v=50*(y.height/y.width);for(let g=1;g<=w;g++){e.setPage(g);const D=(c-50)/2,s=a-20;try{e.addImage(y,"PNG",D,s-v,50,v)}catch{}}f()},y.onerror=()=>{f()}}))(),e.output("blob")},le=async m=>{const{jsPDF:k,autoTable:h}=await V(),e=m.artists.reduce((_,f)=>{const w=f.stage;return _[w]||(_[w]=[]),_[w].push(f),_},{}),c=Object.keys(e).map(Number).sort((_,f)=>_-f),a=new k({orientation:"landscape",unit:"mm",format:"a4"});let t=!0;for(const _ of c){const f=e[_];t||a.addPage(),t=!1;const w=a.internal.pageSize.getWidth(),y=a.internal.pageSize.getHeight(),p=25;if(m.logoUrl)try{const N=await(await fetch(m.logoUrl)).blob(),R=URL.createObjectURL(N),F=40;a.addImage(R,"PNG",w-F-15,10,F,15),URL.revokeObjectURL(R)}catch{}a.setFontSize(18),a.text(`${m.jobTitle} - Infrastructure Needs - Stage ${_}`,15,20);const v=f.map(s=>[s.name,`Stage ${s.stage}`,s.providedBy,s.cat6.enabled?s.cat6.quantity:"-",s.hma.enabled?s.hma.quantity:"-",s.coax.enabled?s.coax.quantity:"-",s.opticalconDuo.enabled?s.opticalconDuo.quantity:"-",s.analog>0?s.analog:"-",s.other||"-"]);h(a,{head:[["Artist Name","Stage","Provided By","CAT6","HMA","Coax","OpticalCon Duo","Analog Lines","Other"]],body:v,startY:30,headStyles:{fillColor:[125,1,1],textColor:[255,255,255],fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,245]},styles:{fontSize:9,cellPadding:3,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:40},1:{cellWidth:15},2:{cellWidth:25},3:{cellWidth:15},4:{cellWidth:15},5:{cellWidth:15},6:{cellWidth:25},7:{cellWidth:15},8:{cellWidth:40}},margin:{bottom:p}});const g=new Date().toLocaleDateString();a.setFontSize(8),a.setTextColor(100),a.text(`Generated on ${g}`,15,y-p+10),a.text(`Stage ${_} Infrastructure Overview`,w/2,y-p+10,{align:"center"});const D=new Image;D.crossOrigin="anonymous",D.src="/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png",await new Promise(s=>{D.onload=()=>{const R=50*(D.height/D.width),F=(w-50)/2,q=y-R-5;try{a.addImage(D,"PNG",F,q,50,R)}catch{}s()},D.onerror=()=>{s()}})}const u=a.getNumberOfPages();for(let _=1;_<=u;_++){a.setPage(_);const f=a.internal.pageSize.getWidth(),w=a.internal.pageSize.getHeight();a.setFontSize(8),a.setTextColor(100),a.text(`Page ${_} of ${u}`,f-25,w-10)}return a.output("blob")},ce=async m=>{const{jsPDF:k,autoTable:h}=await V(),e=new k("landscape","pt","a4"),c=e.internal.pageSize.width,a=e.internal.pageSize.height,t=20,u=[139,21,33],_=[52,73,94],f=[240,240,240],w=[248,249,250];let y=!0;const p=Array.from(m.artistsByDateAndStage.entries());for(let D=0;D<p.length;D++){const[s,N]=p[D],R=Array.from(N.entries());for(let F=0;F<R.length;F++){const[q,r]=R[F];y||e.addPage(),y=!1;let n=20;if(m.logoUrl&&n===20)try{const z=await(await fetch(m.logoUrl)).blob(),E=await new Promise(A=>{const S=new FileReader;S.onload=()=>A(S.result),S.readAsDataURL(z)});e.addImage(E,"PNG",t,n,50,25),n+=35}catch{}e.setFillColor(u[0],u[1],u[2]),e.rect(0,n,c,25,"F"),e.setTextColor(255,255,255),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("Wired Microphone Requirements Matrix",c/2,n+16,{align:"center"}),n+=35,e.setTextColor(_[0],_[1],_[2]),e.setFontSize(14),e.setFont("helvetica","normal"),e.text(m.jobTitle,c/2,n,{align:"center"}),n+=20;const C=ve(s);e.setFillColor(w[0],w[1],w[2]),e.rect(t,n-5,c-t*2,20,"F"),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(`${C} - Stage ${q}`,c/2,n+8,{align:"center"}),n+=30;const o=Te(r);if(o.micModels.length===0){e.setTextColor(_[0],_[1],_[2]),e.setFontSize(11),e.setFont("helvetica","normal"),e.text("No wired microphone requirements for this stage.",t,n);continue}e.setFontSize(10),e.setFont("helvetica","italic"),e.setTextColor(100,100,100),e.text("Individual cells show exact quantities per artist. Peak shows maximum concurrent usage.",t,n),n+=20;const P=["Microphone Model",...o.artistNames,"Peak Need"],T=o.micModels.map(M=>{const z=[M];o.artistNames.forEach(A=>{var d;const S=((d=o.individualMatrix[M])==null?void 0:d[A])||0;z.push(S.toString())});const E=o.peakMatrix[M]||0;return z.push(E.toString()),z}),b=c-t*2,i=Math.min(b*.25,150),x=80,j=b-i-x,W=Math.max(j/o.artistNames.length,60);h(e,{startY:n,head:[P],body:T,theme:"grid",headStyles:{fillColor:u,textColor:[255,255,255],fontSize:10,fontStyle:"bold",halign:"center",valign:"middle"},bodyStyles:{fontSize:9,textColor:_,cellPadding:3,halign:"center",valign:"middle"},alternateRowStyles:{fillColor:f},styles:{cellPadding:3,lineColor:[200,200,200],lineWidth:.5,overflow:"linebreak"},columnStyles:{0:{cellWidth:i,fontStyle:"bold",halign:"left"},[P.length-1]:{cellWidth:x,fillColor:[255,240,240],fontStyle:"bold",textColor:u}},didParseCell:function(M){M.column.index>0&&M.column.index<P.length-1&&(M.cell.styles.cellWidth=W,M.section==="body"&&parseInt(M.cell.text[0])>0&&(M.cell.styles.fillColor=[235,255,235],M.cell.styles.fontStyle="bold"))},margin:{left:t,right:t}})}}const v=new Date().toLocaleString(),g=e.getNumberOfPages();for(let D=1;D<=g;D++)e.setPage(D),e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(128,128,128),e.setDrawColor(200,200,200),e.line(t,a-20,c-t,a-20),e.text(`Generated on ${v}`,t,a-10),e.text(`${m.jobTitle} - Wired Microphone Matrix`,c-t,a-10,{align:"right"}),e.text(`Page ${D} of ${g}`,c/2,a-10,{align:"center"});return new Blob([e.output("blob")],{type:"application/pdf"})},ve=m=>{if(/^\d{4}-\d{2}-\d{2}$/.test(m)){const[k,h,e]=m.split("-"),c=new Date(parseInt(k),parseInt(h)-1,parseInt(e)),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=["January","February","March","April","May","June","July","August","September","October","November","December"];return`${a[c.getDay()]}, ${t[c.getMonth()]} ${parseInt(e)}, ${k}`}return m},Te=m=>{const k=new Set,h=new Set,e={};m.forEach((t,u)=>{const _=t.name||`Artist ${u+1}`;h.add(_),!(!t.wired_mics||!Array.isArray(t.wired_mics))&&t.wired_mics.forEach((f,w)=>{if(!f||typeof f!="object")return;const y=String(f.model||"").trim(),p=parseInt(String(f.quantity||0));!y||p<=0||(k.add(y),e[y]||(e[y]={}),e[y][_]=p)})});const c={};return k.forEach(t=>{const u=e[t]||{},_=Object.values(u).reduce((f,w)=>f+(w||0),0);c[t]=_}),{micModels:Array.from(k).sort(),artistNames:Array.from(h).sort(),individualMatrix:e,peakMatrix:c}},de=m=>{var c;const k=new Map,h=[];for(let a=0;a<m.length;a++){const t=m[a].date;t&&h.push(t)}Array.from(new Set(h));for(let a=0;a<m.length;a++){const t=m[a],u=t.date,_=t.stage||1;u&&(k.has(u)||k.set(u,new Map),k.get(u).has(_)||k.get(u).set(_,[]),k.get(u).get(_).push(t))}const e=Array.from(k.entries());for(let a=0;a<e.length;a++){const[t,u]=e[a],_=Array.from(u.entries());for(let f=0;f<_.length;f++){const[w,y]=_[f];for(let p=0;p<y.length;p++)(c=y[p].wired_mics)!=null&&c.length}}return k},ge=async(m,k,h)=>new Promise(async(e,c)=>{try{const{jsPDF:a,autoTable:t}=await V();let u=h;if(!u){const{data:A,error:S}=await B.from("festival_stages").select("name").eq("job_id",m).eq("number",k).maybeSingle();u=(A==null?void 0:A.name)||`Stage ${k}`}const{data:_,error:f}=await B.from("jobs").select("title").eq("id",m).single();if(f){c(f);return}const{data:w,error:y}=await B.from("festival_gear_setups").select("*").eq("job_id",m).maybeSingle();if(y){c(y);return}if(!w){c(new Error("No gear setup found for festival"));return}const{data:p,error:v}=await B.from("festival_stage_gear_setups").select("*").eq("gear_setup_id",w.id).eq("stage_number",k).maybeSingle(),g=p||w,D=!!p,s=new a({orientation:"portrait"}),N=s.internal.pageSize.width,R=s.internal.pageSize.height,q=R-50,r=(A,S)=>S+A>q?(s.addPage(),n(),30):S,n=()=>{s.setFillColor(125,1,1),s.rect(0,0,N,20,"F"),s.setFontSize(16),s.setTextColor(255,255,255),s.text(`${_.title} - ${u}`,N/2,8,{align:"center"}),s.text("Equipment Setup",N/2,15,{align:"center"})};n(),await new Promise(A=>{const S=new Image;S.crossOrigin="Anonymous",S.onload=()=>{try{const I=S.width/S.height,J=Math.min(18,S.height),U=J*I;s.addImage(S,"JPEG",5,1,U,J),A()}catch{A()}},S.onerror=d=>{A()},S.src=`/logos/${m}.jpg`});let o=30;if(D&&(o=r(10,o),s.setFontSize(10),s.setTextColor(0,0,0),s.text(`Configuration: Stage-specific setup for ${u}`,14,o),o+=10),s.setFontSize(12),s.setTextColor(0,0,0),g.foh_consoles&&g.foh_consoles.length>0){o=r(60,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("FOH Consoles",14,o),o+=10;const A=g.foh_consoles.map(S=>{var d;return[S.model||"N/A",((d=S.quantity)==null?void 0:d.toString())||"1",S.notes||""]});t(s,{startY:o,head:[["Model","Quantity","Notes"]],body:A,theme:"grid",headStyles:{fillColor:[125,1,1]},margin:{left:14,right:14},pageBreak:"auto",showHead:"everyPage",didDrawPage:()=>{s.internal.pages.length>2&&n()}}),o=s.lastAutoTable.finalY+15}if(g.mon_consoles&&g.mon_consoles.length>0){o=r(60,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Monitor Consoles",14,o),o+=10;const A=g.mon_consoles.map(S=>{var d;return[S.model||"N/A",((d=S.quantity)==null?void 0:d.toString())||"1",S.notes||""]});t(s,{startY:o,head:[["Model","Quantity","Notes"]],body:A,theme:"grid",headStyles:{fillColor:[125,1,1]},margin:{left:14,right:14},pageBreak:"auto",showHead:"everyPage",didDrawPage:()=>{s.internal.pages.length>2&&n()}}),o=s.lastAutoTable.finalY+15}o=r(20,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Monitors",14,o),o+=10,s.setFontSize(12),s.setTextColor(0,0,0);const P=g.monitors_quantity||(D?0:g.available_monitors||0);if(s.text(`Available Monitors: ${P}`,14,o),o+=10,g.wireless_systems&&g.wireless_systems.length>0){o=r(60,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Wireless Systems",14,o),o+=10;const A=g.wireless_systems.map(S=>{var d,I;return[S.model||"N/A",((d=S.quantity_hh)==null?void 0:d.toString())||"0",((I=S.quantity_bp)==null?void 0:I.toString())||"0",S.band||"N/A",S.notes||""]});t(s,{startY:o,head:[["Model","HH Quantity","BP Quantity","Band","Notes"]],body:A,theme:"grid",headStyles:{fillColor:[125,1,1]},margin:{left:14,right:14},pageBreak:"auto",showHead:"everyPage",didDrawPage:()=>{s.internal.pages.length>2&&n()}}),o=s.lastAutoTable.finalY+15}if(g.iem_systems&&g.iem_systems.length>0){o=r(60,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("IEM Systems",14,o),o+=10;const A=g.iem_systems.map(S=>{var d,I;return[S.model||"N/A",((d=S.quantity_hh)==null?void 0:d.toString())||"0",((I=S.quantity_bp)==null?void 0:I.toString())||"0",S.band||"N/A",S.notes||""]});t(s,{startY:o,head:[["Model","HH Quantity","BP Quantity","Band","Notes"]],body:A,theme:"grid",headStyles:{fillColor:[125,1,1]},margin:{left:14,right:14},pageBreak:"auto",showHead:"everyPage",didDrawPage:()=>{s.internal.pages.length>2&&n()}}),o=s.lastAutoTable.finalY+15}if(g.wired_mics&&g.wired_mics.length>0){o=r(60,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Wired Microphones",14,o),o+=10;const A=g.wired_mics.map(S=>{var d;return[S.model||"N/A",((d=S.quantity)==null?void 0:d.toString())||"1",S.exclusive_use?"Yes":"No",S.notes||""]});t(s,{startY:o,head:[["Model","Quantity","Exclusive Use","Notes"]],body:A,theme:"grid",headStyles:{fillColor:[125,1,1]},margin:{left:14,right:14},pageBreak:"auto",showHead:"everyPage",didDrawPage:()=>{s.internal.pages.length>2&&n()}}),o=s.lastAutoTable.finalY+15}o=r(50,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Infrastructure",14,o),o+=10,s.setFontSize(12),s.setTextColor(0,0,0);const T=g.infra_cat6_quantity!==void 0?g.infra_cat6_quantity:g.available_cat6_runs||0,b=g.infra_hma_quantity!==void 0?g.infra_hma_quantity:g.available_hma_runs||0,i=g.infra_coax_quantity!==void 0?g.infra_coax_quantity:g.available_coax_runs||0,x=g.infra_analog!==void 0?g.infra_analog:g.available_analog_runs||0,j=g.infra_opticalcon_duo_quantity!==void 0?g.infra_opticalcon_duo_quantity:g.available_opticalcon_duo_runs||0;o=r(40,o),s.text(`Available CAT6 Runs: ${T}`,14,o),o+=8,s.text(`Available HMA Runs: ${b}`,14,o),o+=8,s.text(`Available Coax Runs: ${i}`,14,o),o+=8,s.text(`Available Analog Runs: ${x}`,14,o),o+=8,s.text(`Available Opticalcon Duo Runs: ${j}`,14,o),o+=10,o=r(30,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Extras",14,o),o+=10,s.setFontSize(12),s.setTextColor(0,0,0);const W=g.extras_sf!==void 0?g.extras_sf:g.has_side_fills||!1,M=g.extras_df!==void 0?g.extras_df:g.has_drum_fills||!1,z=g.extras_djbooth!==void 0?g.extras_djbooth:g.has_dj_booths||!1;if(s.text(`Side Fills: ${W?"Yes":"No"}`,14,o),o+=8,s.text(`Drum Fills: ${M?"Yes":"No"}`,14,o),o+=8,s.text(`DJ Booths: ${z?"Yes":"No"}`,14,o),o+=10,g.notes){o=r(30,o),s.setFontSize(14),s.setTextColor(125,1,1),s.text("Notes",14,o),o+=10,s.setFontSize(12),s.setTextColor(0,0,0);const A=s.splitTextToSize(g.notes,N-28),S=A.length*6;o=r(S,o),s.text(A,14,o),o+=S}const E=s.internal.pages.length-1;for(let A=1;A<=E;A++){s.setPage(A),s.setFontSize(8),s.setTextColor(100,100,100);const S=K(new Date,"dd/MM/yyyy HH:mm");s.text(`Generated: ${S}`,N-14,R-10,{align:"right"}),s.text(`${u} Equipment Setup`,14,R-10)}try{const A="/sector pro logo.png",S=new Image;S.onload=()=>{try{const J=30/(S.width/S.height);for(let H=1;H<=E;H++)s.setPage(H),s.addImage(S,"PNG",N/2-30/2,R-J-15,30,J);const U=s.output("blob");e(U)}catch{const I=s.output("blob");e(I)}},S.onerror=()=>{const d=s.output("blob");e(d)},S.src=A}catch{const S=s.output("blob");e(S)}}catch(a){c(a)}}),$e=({open:m,onOpenChange:k,onConfirm:h,maxStages:e,jobTitle:c,jobId:a})=>{const[t,u]=ue.useState({includeGearSetup:!0,gearSetupStages:Array.from({length:e},(r,n)=>n+1),includeShiftSchedules:!0,shiftScheduleStages:Array.from({length:e},(r,n)=>n+1),includeArtistTables:!0,artistTableStages:Array.from({length:e},(r,n)=>n+1),includeArtistRequirements:!0,artistRequirementStages:Array.from({length:e},(r,n)=>n+1),includeRfIemTable:!0,rfIemTableStages:Array.from({length:e},(r,n)=>n+1),includeInfrastructureTable:!0,infrastructureTableStages:Array.from({length:e},(r,n)=>n+1),includeMissingRiderReport:!0,includeWiredMicNeeds:!0,wiredMicNeedsStages:Array.from({length:e},(r,n)=>n+1),includeWeatherPrediction:!0,generateIndividualStagePDFs:!1}),_=(r,n,C)=>{(r==="gearSetupStages"||r==="shiftScheduleStages"||r==="artistTableStages"||r==="artistRequirementStages"||r==="rfIemTableStages"||r==="infrastructureTableStages"||r==="wiredMicNeedsStages")&&u(o=>({...o,[r]:C?[...o[r],n].sort((P,T)=>P-T):o[r].filter(P=>P!==n)}))},f=()=>{const r=Array.from({length:e},(n,C)=>C+1);u(n=>({...n,gearSetupStages:r,shiftScheduleStages:r,artistTableStages:r,artistRequirementStages:r,rfIemTableStages:r,infrastructureTableStages:r,wiredMicNeedsStages:r}))},w=()=>{u(r=>({...r,gearSetupStages:[],shiftScheduleStages:[],artistTableStages:[],artistRequirementStages:[],rfIemTableStages:[],infrastructureTableStages:[],wiredMicNeedsStages:[]}))},y=()=>{const r=c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_");if(t.generateIndividualStagePDFs)return`${r}_Individual_Stage_PDFs.zip`;const n=[];if(t.includeShiftSchedules&&n.push("Shifts"),t.includeGearSetup&&n.push("Equipment"),t.includeArtistTables&&n.push("Artist_Tables"),t.includeRfIemTable&&n.push("RF_IEM"),t.includeInfrastructureTable&&n.push("Infrastructure"),t.includeMissingRiderReport&&n.push("Missing_Riders"),t.includeArtistRequirements&&n.push("Artist_Requirements"),t.includeWiredMicNeeds&&n.push("Wired_Mics"),t.includeWeatherPrediction&&n.push("Weather"),n.length===1){const P=n[0],T=new Set([...t.includeGearSetup?t.gearSetupStages:[],...t.includeShiftSchedules?t.shiftScheduleStages:[],...t.includeArtistTables?t.artistTableStages:[],...t.includeArtistRequirements?t.artistRequirementStages:[],...t.includeRfIemTable?t.rfIemTableStages:[],...t.includeInfrastructureTable?t.infrastructureTableStages:[],...t.includeWiredMicNeeds?t.wiredMicNeedsStages:[]]),b=Array.from(T).sort((i,x)=>i-x);if(b.length<e&&b.length>0){const i=b.length===1?`Stage${b[0]}`:`Stages${b.join("_")}`;return`${r}_${i}_${P}.pdf`}return`${r}_${P}.pdf`}const C=new Set([...t.includeGearSetup?t.gearSetupStages:[],...t.includeShiftSchedules?t.shiftScheduleStages:[],...t.includeArtistTables?t.artistTableStages:[],...t.includeArtistRequirements?t.artistRequirementStages:[],...t.includeRfIemTable?t.rfIemTableStages:[],...t.includeInfrastructureTable?t.infrastructureTableStages:[],...t.includeWiredMicNeeds?t.wiredMicNeedsStages:[]]),o=Array.from(C).sort((P,T)=>P-T);if(o.length<e&&o.length>0){const P=o.length===1?`Stage${o[0]}`:`Stages${o.join("_")}`;return`${r}_${P}_Documentation.pdf`}return`${r}_Complete_Documentation.pdf`},p=r=>l.jsxs("div",{className:"pl-4 sm:pl-6 space-y-2",children:[l.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Select stages:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-2",children:Array.from({length:e},(n,C)=>C+1).map(n=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:`${r}-${n}`,checked:t[r].includes(n),onCheckedChange:C=>_(r,n,C),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsxs(O,{htmlFor:`${r}-${n}`,className:"text-xs sm:text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:["Stage ",n]})]},n))})]}),v=()=>{const r=y();h(t,r),k(!1)},g=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar el reporte de riders faltantes");return}try{const{data:r,error:n}=await B.from("festival_artists").select("*").eq("job_id",a);if(n)throw n;const C=(r==null?void 0:r.filter(x=>!!x.rider_missing))||[];let o="";try{const{data:x}=await B.from("festival_logos").select("file_path").eq("job_id",a).maybeSingle();if(x!=null&&x.file_path){const{data:{publicUrl:j}}=B.storage.from("festival-logos").getPublicUrl(x.file_path);o=j}}catch{}const P={jobTitle:c,logoUrl:o,artists:C.map(x=>({name:x.name||"Unnamed Artist",stage:x.stage||1,date:x.date||"",showTime:{start:x.show_start||"",end:x.show_end||""}}))},T=await ee(P),b=URL.createObjectURL(T),i=document.createElement("a");i.href=b,i.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Missing_Rider_Report.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(b),$.success("Reporte de Riders Faltantes descargado exitosamente")}catch(r){$.error(`Error al generar Reporte de Riders Faltantes: ${r.message}`)}},D=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar el reporte de equipamiento");return}try{const r=await Q(a),n=t.gearSetupStages.map(async o=>await ge(a,o,r)),C=await Promise.all(n);if(C.length===1){const o=URL.createObjectURL(C[0]),P=document.createElement("a");P.href=o,P.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Stage${t.gearSetupStages[0]}_Gear_Setup.pdf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(o)}else{const{mergePDFs:o}=await he(async()=>{const{mergePDFs:i}=await import("./pdfMerge-DXtLP7Xx.js");return{mergePDFs:i}},__vite__mapDeps([0,1,2,3])),P=await o(C),T=URL.createObjectURL(P),b=document.createElement("a");b.href=T,b.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Gear_Setup.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(T)}$.success("Equipamiento descargado exitosamente")}catch(r){$.error(`Error al generar Equipamiento: ${r.message}`)}},s=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar horarios de turnos");return}try{const r=await Q(a),{data:n,error:C}=await B.from("festival_shifts").select(`
          *,
          festival_shift_assignments (
            technician_id,
            external_technician_name,
            role,
            profiles (first_name, last_name)
          )
        `).eq("job_id",a).in("stage",t.shiftScheduleStages).order("date").order("start_time");if(C)throw C;const o={jobTitle:c,date:new Date().toISOString().split("T")[0],logoUrl:r,shifts:n||[]},P=await ne(o),T=URL.createObjectURL(P),b=document.createElement("a");b.href=T,b.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Shift_Schedules.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(T),$.success("Horarios de Turnos descargados exitosamente")}catch(r){$.error(`Error al generar Horarios de Turnos: ${r.message}`)}},N=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar tablas de artistas");return}try{const r=await Q(a),{data:n,error:C}=await B.from("festival_artists").select("*").eq("job_id",a).in("stage",t.artistTableStages).order("date").order("stage").order("show_start");if(C)throw C;const o={jobTitle:c,date:new Date().toISOString().split("T")[0],logoUrl:r,artists:n||[]},P=await re(o),T=URL.createObjectURL(P),b=document.createElement("a");b.href=T,b.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Artist_Tables.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(T),$.success("Tablas de Artistas descargadas exitosamente")}catch(r){$.error(`Error al generar Tablas de Artistas: ${r.message}`)}},R=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar tabla de RF/IEM");return}try{const r=await Q(a),{data:n,error:C}=await B.from("festival_artists").select("*").eq("job_id",a).in("stage",t.rfIemTableStages).order("date").order("stage").order("show_start");if(C)throw C;const P=await ie({jobTitle:c,logoUrl:r,artists:n||[]}),T=URL.createObjectURL(P),b=document.createElement("a");b.href=T,b.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_RF_IEM_Table.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(T),$.success("Tabla de RF/IEM descargada exitosamente")}catch(r){$.error(`Error al generar Tabla de RF/IEM: ${r.message}`)}},F=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar tabla de infraestructura");return}try{const r=await Q(a),{data:n,error:C}=await B.from("festival_artists").select("*").eq("job_id",a).in("stage",t.infrastructureTableStages).order("date").order("stage").order("show_start");if(C)throw C;const P=await le({jobTitle:c,logoUrl:r,artists:n||[]}),T=URL.createObjectURL(P),b=document.createElement("a");b.href=T,b.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Infrastructure_Table.pdf`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(T),$.success("Tabla de Infraestructura descargada exitosamente")}catch(r){$.error(`Error al generar Tabla de Infraestructura: ${r.message}`)}},q=async()=>{if(!a){$.error("Se requiere el ID del trabajo para generar necesidades de micrófonos cableados");return}try{const r=await Q(a),{data:n,error:C}=await B.from("festival_artists").select("*").eq("job_id",a).in("stage",t.wiredMicNeedsStages).order("date").order("stage").order("show_start");if(C)throw C;const o=(n==null?void 0:n.filter(j=>j.mic_kit==="festival"&&j.wired_mics&&Array.isArray(j.wired_mics)&&j.wired_mics.length>0))||[],P=de(o),b=await ce({jobTitle:c,logoUrl:r,artistsByDateAndStage:P}),i=URL.createObjectURL(b),x=document.createElement("a");x.href=i,x.download=`${c.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Wired_Microphone_Needs.pdf`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(i),$.success("Necesidades de Micrófonos Cableados descargadas exitosamente")}catch(r){$.error(`Error al generar Necesidades de Micrófonos Cableados: ${r.message}`)}};return l.jsx(fe,{open:m,onOpenChange:k,children:l.jsxs(pe,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] sm:max-h-[90vh] w-[95vw] sm:w-auto overflow-y-auto p-4 sm:p-6",children:[l.jsx(be,{children:l.jsx(ye,{className:"text-base sm:text-lg",children:"Seleccionar Documentos para Imprimir"})}),l.jsxs("div",{className:"space-y-4 sm:space-y-6 py-2 sm:py-4",children:[l.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50 dark:bg-blue-950/30 dark:border-blue-800",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(Y,{id:"individual-stage-pdfs",checked:t.generateIndividualStagePDFs,onCheckedChange:r=>u(n=>({...n,generateIndividualStagePDFs:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"individual-stage-pdfs",className:"font-medium text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Generar PDFs Individuales por Stage"})]}),l.jsx("p",{className:"text-sm text-muted-foreground pl-6 dark:text-gray-300",children:t.generateIndividualStagePDFs?"Crea documentos PDF separados para cada stage conteniendo los tipos de documentos seleccionados. Se descarga como un archivo ZIP con PDFs individuales para cada stage.":"Crear un único PDF combinado con los tipos de documentos y stages seleccionados. Usa las selecciones de stage abajo para elegir qué stages incluir para cada tipo de documento."})]}),e>1&&l.jsxs("div",{className:"border-b pb-4",children:[l.jsx("h3",{className:"text-sm font-medium mb-3 dark:text-gray-200",children:"Controles Globales de Stage"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsx(G,{variant:"outline",size:"sm",onClick:f,className:"w-full sm:w-auto",children:"Seleccionar Todos los Stages"}),l.jsx(G,{variant:"outline",size:"sm",onClick:w,className:"w-full sm:w-auto",children:"Deseleccionar Todos los Stages"})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-2 dark:text-gray-400",children:t.generateIndividualStagePDFs?"Estos controles aplican a todas las secciones. Se generarán PDFs individuales para stages que tengan contenido en cada tipo de documento seleccionado.":"Estos controles aplican a todas las secciones que tienen selecciones de stage."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"gear-setup",checked:t.includeGearSetup,onCheckedChange:r=>u(n=>({...n,includeGearSetup:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"gear-setup",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Configuración de Equipamiento por Stage"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:D,className:"h-8 px-2",title:"Download Gear Setup only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeGearSetup&&e>1&&p("gearSetupStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"shift-schedules",checked:t.includeShiftSchedules,onCheckedChange:r=>u(n=>({...n,includeShiftSchedules:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"shift-schedules",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Horarios de Turnos de Personal"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:s,className:"h-8 px-2",title:"Download Shift Schedules only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeShiftSchedules&&e>1&&p("shiftScheduleStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"artist-tables",checked:t.includeArtistTables,onCheckedChange:r=>u(n=>({...n,includeArtistTables:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"artist-tables",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Tablas de Programación de Artistas"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:N,className:"h-8 px-2",title:"Download Artist Tables only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeArtistTables&&e>1&&p("artistTableStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"artist-requirements",checked:t.includeArtistRequirements,onCheckedChange:r=>u(n=>({...n,includeArtistRequirements:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"artist-requirements",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Requerimientos Individuales de Artistas"})]}),t.includeArtistRequirements&&e>1&&p("artistRequirementStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"rf-iem-table",checked:t.includeRfIemTable,onCheckedChange:r=>u(n=>({...n,includeRfIemTable:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"rf-iem-table",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Resumen de RF e IEM de Artistas"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:R,className:"h-8 px-2",title:"Download RF/IEM Table only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeRfIemTable&&e>1&&p("rfIemTableStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"infrastructure-table",checked:t.includeInfrastructureTable,onCheckedChange:r=>u(n=>({...n,includeInfrastructureTable:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"infrastructure-table",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Resumen de Necesidades de Infraestructura"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:F,className:"h-8 px-2",title:"Download Infrastructure Table only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeInfrastructureTable&&e>1&&p("infrastructureTableStages")]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"wired-mic-needs",checked:t.includeWiredMicNeeds,onCheckedChange:r=>u(n=>({...n,includeWiredMicNeeds:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"wired-mic-needs",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Requerimientos de Micrófonos Cableados"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:q,className:"h-8 px-2",title:"Download Wired Microphone Needs only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),t.includeWiredMicNeeds&&e>1&&p("wiredMicNeedsStages"),l.jsx("div",{className:"pl-6 text-sm text-muted-foreground dark:text-gray-300",children:"Requerimientos detallados de inventario de micrófonos y análisis de uso pico"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"weather-prediction",checked:t.includeWeatherPrediction,onCheckedChange:r=>u(n=>({...n,includeWeatherPrediction:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"weather-prediction",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Incluir Pronóstico del Tiempo"})]}),l.jsx("div",{className:"pl-6 text-sm text-muted-foreground dark:text-gray-300",children:"Pronóstico del tiempo para las fechas del festival de Open-Meteo"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Y,{id:"missing-rider-report",checked:t.includeMissingRiderReport,onCheckedChange:r=>u(n=>({...n,includeMissingRiderReport:r})),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary dark:border-gray-500 dark:data-[state=checked]:bg-primary dark:data-[state=checked]:border-primary"}),l.jsx(O,{htmlFor:"missing-rider-report",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-gray-200",children:"Reporte de Riders Faltantes"})]}),a&&l.jsx(G,{variant:"ghost",size:"sm",onClick:g,className:"h-8 px-2",title:"Download Missing Rider Report only",children:l.jsx(Z,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"pl-6 text-sm text-muted-foreground dark:text-gray-300",children:"Resumen de todos los artistas con riders técnicos faltantes"})]})]}),l.jsx("div",{className:"border-t pt-4",children:l.jsxs("div",{className:"bg-muted/50 p-3 rounded-md dark:bg-muted/20",children:[l.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-1 dark:text-gray-200",children:"Nombre de archivo generado:"}),l.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground font-mono dark:text-gray-300 break-all",children:y()})]})})]}),l.jsxs(xe,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[l.jsx(G,{variant:"outline",onClick:()=>k(!1),className:"w-full sm:w-auto",children:"Cancelar"}),l.jsxs(G,{onClick:v,className:"w-full sm:w-auto",children:[l.jsxs("span",{className:"hidden sm:inline",children:["Generar ",t.generateIndividualStagePDFs?"PDFs Individuales por Stage":"PDF"]}),l.jsx("span",{className:"sm:hidden",children:"Generar"})]})]})]})})},ke=async(m,k,h)=>{var e;try{const c=await oe.create(),a=c.addPage([595.28,841.89]),{width:t,height:u}=a.getSize(),_=50,f=50,w=await c.embedFont(ae.HelveticaBold),y=await c.embedFont(ae.Helvetica),{data:p}=await B.from("jobs").select("start_time, end_time").eq("id",m).single();let v="";if(p!=null&&p.start_time&&(p!=null&&p.end_time)){const C=new Date(p.start_time),o=new Date(p.end_time),P={year:"numeric",month:"long",day:"numeric"};C.getTime()===o.getTime()?v=C.toLocaleDateString(void 0,P):v=`${C.toLocaleDateString(void 0,P)} - ${o.toLocaleDateString(void 0,P)}`}a.drawRectangle({x:0,y:u-100,width:t,height:100,color:L(125/255,1/255,1/255)}),a.drawText("FESTIVAL DOCUMENTATION",{x:_,y:u-60,size:24,color:L(1,1,1)});let g=0,D=0;if(h)try{let C=await fetch(h);if(!C.ok&&C.status===401){const{data:S}=await B.auth.getSession(),d=(e=S==null?void 0:S.session)==null?void 0:e.access_token;d&&(C=await fetch(h,{headers:{Authorization:`Bearer ${d}`}}))}if(!C.ok)throw new Error(`Logo fetch failed with status ${C.status}`);const o=C.headers.get("Content-Type")||"",P=await C.arrayBuffer();let T;const b=/png/i.test(o),i=/(jpe?g)/i.test(o),x=/\.png(\?|$)/i.test(h),j=/\.jpe?g(\?|$)/i.test(h),W=new Uint8Array(P.slice(0,8)),M=W.length>=8&&W[0]===137&&W[1]===80&&W[2]===78&&W[3]===71,z=W.length>=3&&W[0]===255&&W[1]===216&&W[2]===255,E=b||x||M,A=i||j||z;try{if(E)T=await c.embedPng(P);else if(A)T=await c.embedJpg(P);else try{T=await c.embedPng(P)}catch{T=await c.embedJpg(P)}}catch(S){throw S}if(T){const d=T.height/T.width*150;a.drawImage(T,{x:t-150-f,y:u/2-d/2,width:150,height:d}),g=150,D=d}}catch{}const s=g>0?t-f-g-20:t-f,N=Math.max(100,s-_),R=36,F=42,q=u/2+50,r=Ce(k||"",w,R,N);if(r.forEach((C,o)=>{a.drawText(C,{x:_,y:q-o*F,size:R,color:L(0,0,0),font:w})}),v){const C=q-r.length*F-12;a.drawText(v,{x:_,y:C,size:16,color:L(.3,.3,.3),font:y}),a.drawText("Complete Technical Documentation",{x:_,y:C-30,size:16,color:L(.5,.5,.5),font:y})}else{const C=q-r.length*F-12;a.drawText("Complete Technical Documentation",{x:_,y:C,size:16,color:L(.5,.5,.5),font:y})}const n=await c.save();return new Blob([new Uint8Array(n)],{type:"application/pdf"})}catch(c){throw c}};function Ce(m,k,h,e){if(!m)return[];const c=m.split(/\s+/),a=[];let t="";for(const u of c){const _=t?`${t} ${u}`:u;k.widthOfTextAtSize(_,h)<=e||t.length===0?t=_:(a.push(t),t=u)}return t&&a.push(t),a}const De=async(m,k)=>{try{const h=await oe.create(),e=h.addPage([595.28,841.89]),{width:c,height:a}=e.getSize();if(e.drawRectangle({x:0,y:a-100,width:c,height:100,color:L(125/255,1/255,1/255)}),e.drawText("TABLE OF CONTENTS",{x:50,y:a-60,size:24,color:L(1,1,1)}),k)try{const w=await(await fetch(k)).arrayBuffer();let y;if(k.toLowerCase().endsWith(".png")?y=await h.embedPng(w):y=await h.embedJpg(w),y){const v=y.height/y.width*100;e.drawImage(y,{x:c-100-50,y:a-60-v/2+10,width:100,height:v})}}catch{}let t=a-150,u=3;e.drawText("Section",{x:50,y:t,size:14,color:L(0,0,0)}),e.drawText("Page",{x:c-100,y:t,size:14,color:L(0,0,0)}),t-=20,e.drawLine({start:{x:50,y:t},end:{x:c-50,y:t},thickness:1,color:L(.8,.8,.8)}),t-=30;for(const f of m){e.drawText(f.title,{x:50,y:t,size:12,color:L(0,0,0)}),e.drawText(u.toString(),{x:c-100,y:t,size:12,color:L(0,0,0)});let w=250;for(;w<c-105;)e.drawText(".",{x:w,y:t,size:12,color:L(.7,.7,.7)}),w+=10;u+=f.pageCount,t-=30}e.drawText("Page 2",{x:c/2,y:30,size:10,color:L(.5,.5,.5)});const _=await h.save();return new Blob([new Uint8Array(_)],{type:"application/pdf"})}catch(h){throw h}},Ne=async m=>{var _,f;const{jsPDF:k,autoTable:h}=await V(),e=new k,c=e.internal.pageSize.width;let a=20;if(m.logoUrl)try{const y=await(await fetch(m.logoUrl)).blob(),p=await new Promise(v=>{const g=new FileReader;g.onloadend=()=>v(g.result),g.readAsDataURL(y)});e.addImage(p,"JPEG",c-60,10,50,30)}catch{}e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Weather Forecast",20,a),a+=10,e.setFontSize(14),e.setFont("helvetica","normal"),e.text(m.jobTitle,20,a),a+=20;const t=m.jobDates.length>0?m.jobDates.length===1?m.jobDates[0].toISOString().split("T")[0].split("-").reverse().join("/"):`${m.jobDates[0].toISOString().split("T")[0].split("-").reverse().join("/")} - ${m.jobDates[m.jobDates.length-1].toISOString().split("T")[0].split("-").reverse().join("/")}`:"";let u=null;if(m.venue&&t)try{u=await we(m.venue,t)}catch{}if(u&&u.length>0){const w=u.map(y=>{const p=new Date(y.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),v=`${Math.round(y.maxTemp)}°C / ${Math.round(y.minTemp)}°C`,g=y.precipitationProbability>0?`${y.precipitationProbability}%`:"None";return[p,y.condition,v,g]});h(e,{startY:a,head:[["Date","Condition","Temperature","Rain Chance"]],body:w,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontStyle:"bold"},bodyStyles:{textColor:50},columnStyles:{0:{cellWidth:50},1:{cellWidth:40},2:{cellWidth:35},3:{cellWidth:30}},margin:{left:20,right:20}}),a=e.lastAutoTable.finalY+20,e.setFontSize(10),e.setFont("helvetica","italic"),e.text("Weather data provided by Open-Meteo (open-meteo.com)",20,a),e.text(`Generated on: ${new Date().toLocaleString()}`,20,a+10)}else e.setFontSize(12),e.setFont("helvetica","normal"),e.text("Weather data not available for the selected dates and location.",20,a),!((_=m.venue)!=null&&_.address)&&!((f=m.venue)!=null&&f.coordinates)&&e.text("Please add venue location information to enable weather forecasts.",20,a+15),m.jobDates.length===0&&e.text("Please add event dates to enable weather forecasts.",20,a+30);return new Blob([e.output("blob")],{type:"application/pdf"})},X=m=>m.sort((k,h)=>{if(k.date!==h.date)return new Date(k.date).getTime()-new Date(h.date).getTime();if(k.stage!==h.stage)return k.stage-h.stage;const e=k.show_start||"",c=h.show_start||"",a=e?parseInt(e.split(":")[0],10):0,t=c?parseInt(c.split(":")[0],10):0,u=a>=0&&a<7?`${a+24}${e.substring(e.indexOf(":"))}`:e,_=t>=0&&t<7?`${t+24}${c.substring(c.indexOf(":"))}`:c;return u<_?-1:u>_?1:(k.name||"").localeCompare(h.name||"")}),Ie=async(m,k,h,e)=>{const c=await Q(m),{data:a,error:t}=await B.from("festival_stages").select("number, name").eq("job_id",m).order("number"),u=N=>{const R=a==null?void 0:a.find(F=>F.number===N);return(R==null?void 0:R.name)||`Stage ${N}`},_=[],f=[],w=[],y=[];let p=null,v=null,g=null,D=null,s=null;try{const{data:N,error:R}=await B.from("festival_artists").select("*").eq("job_id",m);if(R)throw R;if(h.includeGearSetup&&h.gearSetupStages.length>0)for(const T of h.gearSetupStages)try{const b=u(T),i=await ge(m,T,b);i&&i.size>0&&_.push(i)}catch{}if(h.includeShiftSchedules){const{data:T,error:b}=await B.from("job_date_types").select("date").eq("job_id",m).order("date");if(!b){const i=[...new Set((T==null?void 0:T.map(x=>x.date))||[])];for(const x of i){if(!x)continue;const{data:j,error:W}=await B.from("festival_shifts").select(`
              id, job_id, name, date, start_time, end_time, department, stage
            `).eq("job_id",m).eq("date",x);if(W)continue;const M=j==null?void 0:j.filter(z=>!z.stage||h.shiftScheduleStages.includes(Number(z.stage)));if(M&&M.length>0)try{const E=(await Promise.all(M.map(async d=>{try{const{data:I,error:J}=await B.from("festival_shift_assignments").select(`
                      id, shift_id, technician_id, external_technician_name, role
                    `).eq("shift_id",d.id);if(J)return{...d,assignments:[]};const U=await Promise.all((I||[]).map(async H=>{if(!H.technician_id&&!H.external_technician_name)return{...H,profiles:null};if(H.external_technician_name)return{...H,profiles:null,external_technician_name:H.external_technician_name};try{const{data:te,error:me}=await B.from("profiles").select("id, first_name, last_name, email, department, role").eq("id",H.technician_id).single();return me?{...H,profiles:null}:{...H,profiles:te}}catch{return{...H,profiles:null}}}));return{...d,assignments:U||[]}}catch{return{...d,assignments:[]}}}))).map(d=>({id:d.id,job_id:d.job_id,date:d.date,start_time:d.start_time,end_time:d.end_time,name:d.name,department:d.department||void 0,stage:d.stage?Number(d.stage):void 0,assignments:d.assignments.map(I=>({...I,external_technician_name:I.external_technician_name||void 0}))})),S=await ne({jobTitle:k||"Festival",date:x,jobId:m,shifts:E,logoUrl:c});S&&S.size>0&&f.push(S)}catch{}}}}if(h.includeArtistTables){const T=N==null?void 0:N.filter(b=>h.artistTableStages.includes(Number(b.stage)));if(T&&T.length>0){const b=X(T),i=new Map;b.forEach(j=>{var W;i.has(j.date)||i.set(j.date,[]),(W=i.get(j.date))==null||W.push(j)});const{data:x}=await B.from("festival_stages").select("*").eq("job_id",m);for(const[j,W]of i.entries()){if(!W||W.length===0)continue;const M=new Map;W.forEach(z=>{var E;M.has(z.stage)||M.set(z.stage,[]),(E=M.get(z.stage))==null||E.push(z)});for(const[z,E]of M.entries()){if(E.length===0)continue;const A=u(z),S={jobTitle:k,date:j,stage:A,artists:E.map(d=>{const I=(d.wireless_systems||[]).map(U=>({model:U.model||"",quantity_hh:U.quantity_hh||0,quantity_bp:U.quantity_bp||0,band:U.band||""})),J=(d.iem_systems||[]).map(U=>({model:U.model||"",quantity_hh:U.quantity_hh||0,quantity_bp:U.quantity_bp||0,quantity:U.quantity||0,band:U.band||""}));return{name:String(d.name||""),stage:Number(d.stage||1),showTime:{start:String(d.show_start||""),end:String(d.show_end||"")},soundcheck:d.soundcheck_start?{start:String(d.soundcheck_start||""),end:String(d.soundcheck_end||"")}:void 0,technical:{fohTech:!!d.foh_tech,monTech:!!d.mon_tech,fohConsole:{model:String(d.foh_console||""),providedBy:String(d.foh_console_provided_by||"festival")},monConsole:{model:String(d.mon_console||""),providedBy:String(d.mon_console_provided_by||"festival")},wireless:{systems:I,providedBy:String(d.wireless_provided_by||"festival")},iem:{systems:J,providedBy:String(d.iem_provided_by||"festival")},monitors:{enabled:!!d.monitors_enabled,quantity:Number(d.monitors_quantity||0)}},extras:{sideFill:!!d.extras_sf,drumFill:!!d.extras_df,djBooth:!!d.extras_djbooth},notes:String(d.notes||""),micKit:d.mic_kit||"band",wiredMics:d.wired_mics||[],infrastructure:{infra_cat6:d.infra_cat6,infra_cat6_quantity:d.infra_cat6_quantity,infra_hma:d.infra_hma,infra_hma_quantity:d.infra_hma_quantity,infra_coax:d.infra_coax,infra_coax_quantity:d.infra_coax_quantity,infra_opticalcon_duo:d.infra_opticalcon_duo,infra_opticalcon_duo_quantity:d.infra_opticalcon_duo_quantity,infra_analog:d.infra_analog,other_infrastructure:d.other_infrastructure,infrastructure_provided_by:d.infrastructure_provided_by},riderMissing:!!d.rider_missing}}),logoUrl:c};try{const d=await re(S);d&&d.size>0&&w.push(d)}catch{}}}}}if(h.includeArtistRequirements&&N&&N.length>0){const T=N.filter(i=>h.artistRequirementStages.includes(Number(i.stage))),b=X(T);for(const i of b)try{const x={name:i.name||"Unnamed Artist",stage:i.stage||1,date:i.date||"",schedule:{show:{start:i.show_start||"",end:i.show_end||""},soundcheck:i.soundcheck_start?{start:i.soundcheck_start||"",end:i.soundcheck_end||""}:void 0},technical:{fohTech:!!i.foh_tech,monTech:!!i.mon_tech,fohConsole:{model:String(i.foh_console||""),providedBy:String(i.foh_console_provided_by||"festival")},monConsole:{model:String(i.mon_console||""),providedBy:String(i.mon_console_provided_by||"festival")},wireless:{systems:i.wireless_systems||[],providedBy:String(i.wireless_provided_by||"festival"),model:String(i.wireless_model||""),handhelds:Number(i.wireless_quantity_hh||0),bodypacks:Number(i.wireless_quantity_bp||0),band:String(i.wireless_band||"")},iem:{systems:i.iem_systems||[],providedBy:String(i.iem_provided_by||"festival"),model:String(i.iem_model||""),quantity:Number(i.iem_quantity||0),band:String(i.iem_band||"")},monitors:{enabled:!!i.monitors_enabled,quantity:Number(i.monitors_quantity||0)}},infrastructure:{providedBy:String(i.infrastructure_provided_by||"festival"),cat6:{enabled:!!i.infra_cat6,quantity:Number(i.infra_cat6_quantity||0)},hma:{enabled:!!i.infra_hma,quantity:Number(i.infra_hma_quantity||0)},coax:{enabled:!!i.infra_coax,quantity:Number(i.infra_coax_quantity||0)},opticalconDuo:{enabled:!!i.infra_opticalcon_duo,quantity:Number(i.infra_opticalcon_duo_quantity||0)},analog:Number(i.infra_analog||0),other:String(i.other_infrastructure||"")},extras:{sideFill:!!i.extras_sf,drumFill:!!i.extras_df,djBooth:!!i.extras_djbooth,wired:String(i.extras_wired||"")},notes:i.notes?String(i.notes):void 0,logoUrl:c},j=await Se(x);j&&j.size>0&&y.push(j)}catch{}}if(h.includeRfIemTable&&N&&N.length>0){const T=N.filter(i=>h.rfIemTableStages.includes(Number(i.stage))),b=X(T);if(b.length>0){const i={jobTitle:k,logoUrl:c,artists:b.map(x=>({name:x.name||"Unnamed Artist",stage:x.stage||1,wirelessSystems:x.wireless_systems||[],iemSystems:x.iem_systems||[],wirelessProvidedBy:x.wireless_provided_by||"festival",iemProvidedBy:x.iem_provided_by||"festival"}))};try{p=await ie(i)}catch{}}}if(h.includeInfrastructureTable&&N&&N.length>0){const T=N.filter(i=>h.infrastructureTableStages.includes(Number(i.stage))),b=X(T);if(b.length>0){const i={jobTitle:k,logoUrl:c,artists:b.map(x=>({name:x.name||"Unnamed Artist",stage:x.stage||1,providedBy:x.infrastructure_provided_by||"festival",cat6:{enabled:!!x.infra_cat6,quantity:Number(x.infra_cat6_quantity||0)},hma:{enabled:!!x.infra_hma,quantity:Number(x.infra_hma_quantity||0)},coax:{enabled:!!x.infra_coax,quantity:Number(x.infra_coax_quantity||0)},opticalconDuo:{enabled:!!x.infra_opticalcon_duo,quantity:Number(x.infra_opticalcon_duo_quantity||0)},analog:Number(x.infra_analog||0),other:String(x.other_infrastructure||"")}))};try{v=await le(i)}catch{}}}if(h.includeWeatherPrediction)try{const{data:T,error:b}=await B.from("jobs").select("*").eq("id",m).single();if(!b){const i=new Date(T.start_time),x=new Date(T.end_time),j=[],W=new Date(i);for(;W<=x;)j.push(new Date(W)),W.setDate(W.getDate()+1);const M={jobTitle:k||"Festival",logoUrl:c,venue:{address:T.description},jobDates:j},z=await Ne(M);z&&z.size>0&&(s=z)}}catch{}if(h.includeMissingRiderReport)if(N&&N.length>0){const T=N.filter(x=>!!x.rider_missing),b=X(T),i={jobTitle:k,logoUrl:c,artists:b.map(x=>({name:x.name||"Unnamed Artist",stage:x.stage||1,date:x.date||"",showTime:{start:x.show_start||"",end:x.show_end||""}}))};try{g=await ee(i)}catch{}}else{const T={jobTitle:k,logoUrl:c,artists:[]};try{g=await ee(T)}catch{}}if(h.includeWiredMicNeeds&&N&&N.length>0){const T=N.filter(b=>h.wiredMicNeedsStages.includes(Number(b.stage))&&b.mic_kit==="festival"&&b.wired_mics&&Array.isArray(b.wired_mics)&&b.wired_mics.length>0);if(T.length>0){const b=de(T),i={jobTitle:k,logoUrl:c,artistsByDateAndStage:b};try{D=await ce(i)}catch{}}}const F=[];h.includeShiftSchedules&&f.length>0&&F.push({title:"Staff Shift Schedules",pageCount:f.length}),h.includeGearSetup&&_.length>0&&F.push({title:"Stage Equipment Setup",pageCount:_.length}),h.includeArtistTables&&w.length>0&&F.push({title:"Artist Schedule Tables",pageCount:w.length}),h.includeRfIemTable&&p&&F.push({title:"Artist RF & IEM Overview",pageCount:1}),h.includeInfrastructureTable&&v&&F.push({title:"Infrastructure Needs Overview",pageCount:1}),h.includeWiredMicNeeds&&D&&F.push({title:"Wired Microphone Requirements Matrix",pageCount:1}),h.includeWeatherPrediction&&s&&F.push({title:"Weather Forecast",pageCount:1}),h.includeMissingRiderReport&&g&&F.push({title:"Missing Rider Report",pageCount:1}),h.includeArtistRequirements&&y.length>0&&F.push({title:"Individual Artist Requirements",pageCount:y.length});const q=await ke(m,k,c),r=await De(F,c),n=[q,r,...h.includeShiftSchedules?f:[],...h.includeGearSetup?_:[],...h.includeArtistTables?w:[],...h.includeRfIemTable&&p?[p]:[],...h.includeInfrastructureTable&&v?[v]:[],...h.includeWiredMicNeeds&&D?[D]:[],...h.includeWeatherPrediction&&s?[s]:[],...h.includeMissingRiderReport&&g?[g]:[],...h.includeArtistRequirements?y:[]];if([...f,..._,...w,...p?[p]:[],...v?[v]:[],...D?[D]:[],...s?[s]:[],...g?[g]:[],...y].length===0)throw new Error("No content documents were generated. Please ensure at least one document type has data to include in the PDF.");const o=await _e(n),P=e||`${k.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Complete_Documentation.pdf`;return{blob:o,filename:P}}catch(N){throw N}};export{$e as P,ce as a,ge as b,ne as e,Ie as g,de as o};
