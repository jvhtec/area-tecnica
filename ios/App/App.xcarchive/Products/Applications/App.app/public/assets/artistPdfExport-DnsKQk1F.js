import{a as W}from"./lazyPdf-xVUlxKNu.js";const T=async(t,i)=>new Promise(c=>{const e=new Image;e.crossOrigin="anonymous";const s=setTimeout(()=>{c(null)},1e4);e.onload=()=>{clearTimeout(s),c(e)},e.onerror=h=>{clearTimeout(s),c(null)},e.src=t}),z=t=>{if(!t)return"None";const i=[];try{return t.infra_cat6&&t.infra_cat6_quantity&&i.push(`${t.infra_cat6_quantity}x CAT6`),t.infra_hma&&t.infra_hma_quantity&&i.push(`${t.infra_hma_quantity}x HMA`),t.infra_coax&&t.infra_coax_quantity&&i.push(`${t.infra_coax_quantity}x Coax`),t.infra_opticalcon_duo&&t.infra_opticalcon_duo_quantity&&i.push(`${t.infra_opticalcon_duo_quantity}x OpticalCON DUO`),t.infra_analog&&t.infra_analog>0&&i.push(`${t.infra_analog}x Analog`),t.other_infrastructure&&i.push(t.other_infrastructure),i.length>0?i.join(", "):"None"}catch{return"Error formatting infrastructure"}},F=(t=[],i="band")=>t.length===0?"None":t.map(c=>{const e=c.exclusive_use?" (E)":"";return`${c.quantity}x ${c.model}${e}`}).join(", "),_=(t=[],i="festival",c=!1)=>t.length===0?"None":i==="mixed"?t.map(e=>{const h=(e.provided_by||"festival")==="festival"?"(F)":"(B)";if(c){const g=e.quantity_hh||e.quantity||0,f=e.quantity_bp||0;return`${e.model}: ${g} ch${f>0?`, ${f} bp`:""} ${h}`}else{const g=e.quantity_hh||0,f=e.quantity_bp||0,a=g+f;return g>0&&f>0?`${e.model}: ${g}x HH, ${f}x BP ${h}`:a>0?`${e.model}: ${a}x ${h}`:`${e.model} ${h}`}}).join("; "):t.map(e=>{if(c){const s=e.quantity_hh||e.quantity||0,h=e.quantity_bp||0;return`${e.model}: ${s} ch${h>0?`, ${h} bp`:""}`}else{const s=e.quantity_hh||0,h=e.quantity_bp||0,g=s+h;return s>0&&h>0?`${e.model}: ${s}x HH, ${h}x BP`:g>0?`${e.model}: ${g}x`:e.model}}).join("; "),B=(t,i,c)=>{const e=i?" + Tech":"",s=t.providedBy==="mixed"?"(Mixed)":`(${t.providedBy})`;return`${c}: ${t.model} ${s}${e}`},M=(t=[])=>{if(t.length===0)return"OK";const i=t.filter(s=>s.severity==="error"),c=t.filter(s=>s.severity==="warning"),e=[];return i.length>0&&e.push(`${i.length} Error${i.length!==1?"s":""}`),c.length>0&&e.push(`${c.length} Warning${c.length!==1?"s":""}`),e.join(", ")},P=(t,i,c)=>{let e=c;const s=i.internal.pageSize.height,h=i.internal.pageSize.width,g=r=>{e+r>s-20&&(i.addPage(),e=20)};i.setFontSize(14),i.setTextColor(0,0,0),i.text("Additional Equipment Needed to Cover All Riders",10,e),e+=10;let f=!1;i.setFontSize(12),i.setTextColor(200,0,0);const a=[];t.consoles.foh.length>0&&t.consoles.foh.forEach(r=>{a.push(`FOH Console - ${r.model}: ${r.additionalQuantity} additional units (${r.requiredBy.join(", ")})`)}),t.consoles.monitor.length>0&&t.consoles.monitor.forEach(r=>{a.push(`Monitor Console - ${r.model}: ${r.additionalQuantity} additional units (${r.requiredBy.join(", ")})`)}),t.wireless.length>0&&t.wireless.forEach(r=>{const u=[];r.additionalHH>0&&u.push(`${r.additionalHH} handheld`),r.additionalBP>0&&u.push(`${r.additionalBP} beltpack`),u.length>0&&a.push(`Wireless - ${r.model}: ${u.join(", ")} units (${r.requiredBy.join(", ")})`)}),t.iem.length>0&&t.iem.forEach(r=>{const u=[];r.additionalChannels>0&&u.push(`${r.additionalChannels} channels`),r.additionalBP>0&&u.push(`${r.additionalBP} beltpack`),u.length>0&&a.push(`IEM - ${r.model}: ${u.join(", ")} (${r.requiredBy.join(", ")})`)}),a.length>0&&(f=!0,g(15),i.text("CRITICAL EQUIPMENT:",10,e),e+=8,i.setFontSize(10),i.setTextColor(0,0,0),a.forEach(r=>{g(6);const u=i.splitTextToSize(`• ${r}`,h-25);i.text(u,15,e),e+=u.length*4+2}),e+=5);const x=[];t.infrastructure.cat6.additionalQuantity>0&&x.push(`CAT6 Runs: ${t.infrastructure.cat6.additionalQuantity} additional (${t.infrastructure.cat6.requiredBy.join(", ")})`),t.infrastructure.hma.additionalQuantity>0&&x.push(`HMA Runs: ${t.infrastructure.hma.additionalQuantity} additional (${t.infrastructure.hma.requiredBy.join(", ")})`),t.infrastructure.coax.additionalQuantity>0&&x.push(`Coax Runs: ${t.infrastructure.coax.additionalQuantity} additional (${t.infrastructure.coax.requiredBy.join(", ")})`),t.infrastructure.opticalcon_duo.additionalQuantity>0&&x.push(`OpticalCON DUO Runs: ${t.infrastructure.opticalcon_duo.additionalQuantity} additional (${t.infrastructure.opticalcon_duo.requiredBy.join(", ")})`),t.infrastructure.analog.additionalQuantity>0&&x.push(`Analog Runs: ${t.infrastructure.analog.additionalQuantity} additional (${t.infrastructure.analog.requiredBy.join(", ")})`),x.length>0&&(f=!0,g(15),i.setFontSize(12),i.setTextColor(255,165,0),i.text("INFRASTRUCTURE:",10,e),e+=8,i.setFontSize(10),i.setTextColor(0,0,0),x.forEach(r=>{g(6);const u=i.splitTextToSize(`• ${r}`,h-25);i.text(u,15,e),e+=u.length*4+2}),e+=5),t.microphones.length>0&&(f=!0,g(15),i.setFontSize(12),i.setTextColor(0,100,200),i.text("MICROPHONES:",10,e),e+=8,i.setFontSize(10),i.setTextColor(0,0,0),t.microphones.forEach(r=>{g(6);const u=i.splitTextToSize(`• ${r.model}: ${r.additionalQuantity} additional units (${r.requiredBy.join(", ")})`,h-25);i.text(u,15,e),e+=u.length*4+2}),e+=5),t.monitors.additionalQuantity>0&&(f=!0,g(10),i.setFontSize(12),i.setTextColor(0,150,0),i.text("MONITORS:",10,e),e+=8,i.setFontSize(10),i.setTextColor(0,0,0),i.text(`• Additional Monitors: ${t.monitors.additionalQuantity} units (${t.monitors.requiredBy.join(", ")})`,15,e),e+=10);const y=[];return t.extras.sideFills.additionalStages>0&&y.push(`Side Fill Systems: ${t.extras.sideFills.additionalStages} stages (${t.extras.sideFills.requiredBy.join(", ")})`),t.extras.drumFills.additionalStages>0&&y.push(`Drum Fill Systems: ${t.extras.drumFills.additionalStages} stages (${t.extras.drumFills.requiredBy.join(", ")})`),t.extras.djBooths.additionalStages>0&&y.push(`DJ Booth Setups: ${t.extras.djBooths.additionalStages} stages (${t.extras.djBooths.requiredBy.join(", ")})`),y.length>0&&(f=!0,g(15),i.setFontSize(12),i.setTextColor(150,0,150),i.text("EXTRAS:",10,e),e+=8,i.setFontSize(10),i.setTextColor(0,0,0),y.forEach(r=>{g(6);const u=i.splitTextToSize(`• ${r}`,h-25);i.text(u,15,e),e+=u.length*4+2}),e+=5),f||(g(10),i.setFontSize(12),i.setTextColor(0,150,0),i.text("All rider requirements can be satisfied with current equipment inventory.",10,e),e+=15),e},I=async t=>{var u;const{jsPDF:i,autoTable:c}=await W(),e=new i("landscape"),s=e.internal.pageSize.width,h=e.internal.pageSize.height,g=new Date().toLocaleDateString("en-GB");e.setFillColor(125,1,1),e.rect(0,0,s,30,"F");let f=!1;if(t.logoUrl){const o=await T(t.logoUrl);if(o)try{const n=o.width/o.height,d=Math.min(18,o.height),p=d*n;e.addImage(o,"JPEG",5,5,p,d),f=!0}catch{}}if(!f){const o=await T("/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png");if(o)try{const n=o.width/o.height,d=Math.min(18,o.height),p=d*n;e.addImage(o,"PNG",5,5,p,d)}catch{}}e.setFontSize(18),e.setTextColor(255,255,255);const a=`${t.jobTitle} - Artist Schedule`,x=t.stage&&t.stage!=="all"?` - ${((u=t.stageNames)==null?void 0:u[parseInt(t.stage)])||`Stage ${t.stage}`}`:"";e.text(`${a}${x}`,s/2,15,{align:"center"}),e.setFontSize(12),e.text(new Date(t.date).toLocaleDateString("en-GB"),s/2,25,{align:"center"});const y=t.artists.map(o=>{let l="";return o.micKit==="mixed"?l=`Kit: Mixed
Festival: ${F(o.wiredMics,o.micKit)}`:o.micKit==="festival"?l=`Kit: Festival
${F(o.wiredMics,o.micKit)}`:l=`Kit: Band
Band provides`,[o.name,`${o.showTime.start} - ${o.showTime.end}`,o.soundcheck?`${o.soundcheck.start} - ${o.soundcheck.end}`:"No",`${B(o.technical.fohConsole,o.technical.fohTech,"FOH")}
${B(o.technical.monConsole,o.technical.monTech,"MON")}`,`Wireless: ${_(o.technical.wireless.systems,o.technical.wireless.providedBy)}
IEM: ${_(o.technical.iem.systems,o.technical.iem.providedBy,!0)}`,l,o.technical.monitors.enabled?`${o.technical.monitors.quantity}x`:"None",z(o.infrastructure),[o.extras.sideFill?"SF":"",o.extras.drumFill?"DF":"",o.extras.djBooth?"DJ":""].filter(Boolean).join(", ")||"None",o.notes||"No notes",o.riderMissing?"Missing":"Complete",M(o.gearMismatches)]});if(c(e,{head:[["Artist",`Show
Time`,`Sound
check`,"Consoles","Wireless/IEM","Microphones","Mons","Infra","Extras","Notes","Rider",`Gear
Status`]],body:y,startY:40,theme:"grid",styles:{fontSize:8,cellPadding:2,valign:"top"},headStyles:{fillColor:[125,1,1],textColor:[255,255,255],fontSize:9,fontStyle:"bold"},columnStyles:{0:{cellWidth:25},1:{cellWidth:18},2:{cellWidth:18},3:{cellWidth:35},4:{cellWidth:35},5:{cellWidth:30},6:{cellWidth:12},7:{cellWidth:20},8:{cellWidth:12},9:{cellWidth:25},10:{cellWidth:15},11:{cellWidth:20}},didParseCell:o=>{if(o.column.index===10&&o.cell.text[0]==="Missing"&&(o.cell.styles.textColor=[255,0,0]),o.column.index===11){const l=o.cell.text[0];l.includes("Error")?o.cell.styles.textColor=[255,0,0]:l.includes("Warning")?o.cell.styles.textColor=[255,165,0]:l==="OK"&&(o.cell.styles.textColor=[0,128,0])}},margin:{left:10,right:10}}),t.includeGearConflicts){const o=t.artists.filter(l=>l.gearMismatches&&l.gearMismatches.length>0);if(o.length>0){let l=e.lastAutoTable.finalY+20;l>h-60&&(e.addPage(),l=20),e.setFontSize(14),e.setTextColor(0,0,0),e.text("Gear Conflicts Summary",10,l),l+=10,e.setFontSize(10),o.forEach(n=>{var m,S;const d=((m=n.gearMismatches)==null?void 0:m.filter($=>$.severity==="error"))||[],p=((S=n.gearMismatches)==null?void 0:S.filter($=>$.severity==="warning"))||[];(d.length>0||p.length>0)&&(l>h-40&&(e.addPage(),l=20),e.setTextColor(0,0,0),e.text(`${n.name}:`,10,l),l+=5,[...d,...p].forEach($=>{l>h-25&&(e.addPage(),l=20);const C=$.severity==="error"?[255,0,0]:[255,165,0];e.setTextColor(C[0],C[1],C[2]);const w=e.splitTextToSize(`• ${$.message}`,s-25);if(e.text(w,15,l),l+=w.length*4,$.details){l>h-20&&(e.addPage(),l=20),e.setTextColor(100,100,100);const q=e.splitTextToSize(`${$.details}`,s-30);e.text(q,20,l),l+=q.length*4}l+=3}),l+=3)}),t.equipmentNeeds&&(l+=10,l=P(t.equipmentNeeds,e,l))}else if(t.equipmentNeeds){let l=e.lastAutoTable.finalY+20;l>h-60&&(e.addPage(),l=20),l=P(t.equipmentNeeds,e,l)}}const r=await T("/sector pro logo.png");if(r)try{const n=20/(r.width/r.height);e.addImage(r,"PNG",s/2-20/2,h-n-5,20,n)}catch{}else{const o=await T("/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png");if(o)try{const d=20/(o.width/o.height);e.addImage(o,"PNG",s/2-20/2,h-d-10,20,d)}catch{}}return e.setFontSize(8),e.setTextColor(51,51,51),e.text(`Generated: ${g}`,10,h-10),e.output("blob")},b=async(t,i)=>new Promise(c=>{const e=new Image;e.crossOrigin="anonymous";const s=setTimeout(()=>{c(null)},1e4);e.onload=()=>{clearTimeout(s),c(e)},e.onerror=h=>{clearTimeout(s),c(null)},e.src=t}),N=async t=>{const{jsPDF:i,autoTable:c}=await W(),e=new i,s=e.internal.pageSize.width,h=e.internal.pageSize.height,g=new Date().toLocaleDateString("en-GB");e.setFillColor(125,1,1),e.rect(0,0,s,30,"F");let f=!1;if(t.logoUrl){const n=await b(t.logoUrl);if(n)try{const p=n.width/n.height,m=Math.min(18,n.height),S=m*p;e.addImage(n,"JPEG",5,5,S,m),f=!0}catch{}}if(!f){const n=await b("/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png");if(n)try{const p=n.width/n.height,m=Math.min(18,n.height),S=m*p;e.addImage(n,"PNG",5,5,S,m)}catch{}}e.setFontSize(18),e.setTextColor(255,255,255),e.text(`${t.name} - Stage ${t.stage}`,s/2,15,{align:"center"}),e.setFontSize(12),e.text(new Date(t.date).toLocaleDateString("en-GB"),s/2,25,{align:"center"});let a=40;e.setFontSize(12),e.setTextColor(125,1,1),e.text("Schedule",14,a),a+=8,e.setFontSize(9),e.setTextColor(51,51,51),e.text(`Show Time: ${t.schedule.show.start} - ${t.schedule.show.end}`,14,a),a+=6,t.schedule.soundcheck&&(e.text(`Soundcheck: ${t.schedule.soundcheck.start} - ${t.schedule.soundcheck.end}`,14,a),a+=6),a+=4;const x=[["FOH Tech",t.technical.fohTech?"Yes":"No"],["MON Tech",t.technical.monTech?"Yes":"No"]];c(e,{head:[["Position","Tech Required"]],body:x,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]},columnStyles:{0:{cellWidth:80},1:{cellWidth:40}}}),a=e.lastAutoTable.finalY+8;const y=[["FOH Console",t.technical.fohConsole.model,t.technical.fohConsole.providedBy],["MON Console",t.technical.monConsole.model,t.technical.monConsole.providedBy]];if(c(e,{head:[["Position","Model","Provided By"]],body:y,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]}}),a=e.lastAutoTable.finalY+8,t.wiredMics&&t.wiredMics.length>0){const n=t.wiredMics.map(d=>[d.model,d.quantity.toString(),d.exclusive_use?"Yes":"No",d.notes||"-"]);c(e,{head:[["Microphone Model","Quantity","Exclusive Use","Notes"]],body:n,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]},columnStyles:{0:{cellWidth:60},1:{cellWidth:25,halign:"center"},2:{cellWidth:30,halign:"center"},3:{cellWidth:55}}}),a=e.lastAutoTable.finalY+8}const r=[];if(t.technical.wireless.systems&&t.technical.wireless.systems.length>0?t.technical.wireless.systems.forEach(n=>{const d=n.provided_by||t.technical.wireless.providedBy;n.quantity_hh&&n.quantity_hh>0&&r.push(["Handheld",n.quantity_hh,n.model,n.band||"-",d]),n.quantity_bp&&n.quantity_bp>0&&r.push(["Bodypack",n.quantity_bp,n.model,n.band||"-",d])}):(t.technical.wireless.handhelds||t.technical.wireless.bodypacks)&&(t.technical.wireless.handhelds&&r.push(["Handheld",t.technical.wireless.handhelds,t.technical.wireless.model||"-",t.technical.wireless.band||"-",t.technical.wireless.providedBy]),t.technical.wireless.bodypacks&&r.push(["Bodypack",t.technical.wireless.bodypacks,t.technical.wireless.model||"-",t.technical.wireless.band||"-",t.technical.wireless.providedBy])),t.technical.iem.systems&&t.technical.iem.systems.length>0?t.technical.iem.systems.forEach(n=>{const d=n.provided_by||t.technical.iem.providedBy;n.quantity_hh&&n.quantity_hh>0&&r.push(["IEM Channels",n.quantity_hh,n.model,n.band||"-",d]),n.quantity_bp&&n.quantity_bp>0&&r.push(["IEM Bodypacks",n.quantity_bp,n.model,n.band||"-",d])}):t.technical.iem.quantity&&r.push(["IEM System",t.technical.iem.quantity,t.technical.iem.model||"-",t.technical.iem.band||"-",t.technical.iem.providedBy]),r.length>0&&(c(e,{head:[["Type","Qty","Model","Band","Provided By"]],body:r,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]}}),a=e.lastAutoTable.finalY+8),t.technical.monitors.enabled){const n=[["Monitors",t.technical.monitors.quantity]];c(e,{head:[["Type","Quantity"]],body:n,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]}}),a=e.lastAutoTable.finalY+8}const u=[t.infrastructure.cat6.enabled&&["CAT6",t.infrastructure.cat6.quantity],t.infrastructure.hma.enabled&&["HMA",t.infrastructure.hma.quantity],t.infrastructure.coax.enabled&&["Coax",t.infrastructure.coax.quantity],t.infrastructure.opticalconDuo.enabled&&["OpticalCon Duo",t.infrastructure.opticalconDuo.quantity],t.infrastructure.analog>0&&["Analog Lines",t.infrastructure.analog]].filter(Boolean);u.length>0&&(c(e,{head:[["Type","Quantity"]],body:u,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]}}),a=e.lastAutoTable.finalY+8);const o=[t.extras.sideFill&&["Side Fill","Yes"],t.extras.drumFill&&["Drum Fill","Yes"],t.extras.djBooth&&["DJ Booth","Yes"],t.extras.wired&&["Additional Wired",t.extras.wired]].filter(Boolean);if(o.length>0&&(c(e,{head:[["Extra Requirements","Details"]],body:o,startY:a,theme:"grid",styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[125,1,1],textColor:[255,255,255]}}),a=e.lastAutoTable.finalY+8),t.notes){e.setFontSize(12),e.setTextColor(125,1,1),e.text("Notes",14,a),a+=8,e.setFontSize(9),e.setTextColor(51,51,51);const n=e.splitTextToSize(t.notes,s-28);e.text(n,14,a),a+=n.length*5+10}const l=await b("/sector pro logo.png");if(l)try{const p=20/(l.width/l.height);e.addImage(l,"PNG",s/2-20/2,h-p-10,20,p)}catch{}else{const n=await b("/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png");if(n)try{const m=20/(n.width/n.height);e.addImage(n,"PNG",s/2-20/2,h-m-10,20,m)}catch{}}return e.setFontSize(8),e.setTextColor(51,51,51),e.text(`Generated: ${g}`,10,h-10),e.output("blob")};export{I as a,N as e};
