import{m as d}from"./index-NZ6jJLfQ.js";const s={"job.created":{code:"job.created",label:"Job created",default_visibility:"house_plus_job",severity:"success",toast_enabled:!0,template:"{actor_name} created job {job_title}"},"job.updated":{code:"job.updated",label:"Job updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"{actor_name} updated job {job_title}"},"job.requirements.updated":{code:"job.requirements.updated",label:"Job requirements updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"{actor_name} adjusted crew requirements for {job_title}"},"job.deleted":{code:"job.deleted",label:"Job deleted",default_visibility:"management",severity:"warn",toast_enabled:!0,template:"{actor_name} deleted a job"},"job.calltime.updated":{code:"job.calltime.updated",label:"Call time updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"Call time updated for {job_title}"},"document.uploaded":{code:"document.uploaded",label:"Document uploaded",default_visibility:"job_participants",severity:"success",toast_enabled:!0,template:"{actor_name} uploaded {file_name}"},"document.deleted":{code:"document.deleted",label:"Document deleted",default_visibility:"job_participants",severity:"warn",toast_enabled:!0,template:"{actor_name} deleted {file_name}"},"hoja.updated":{code:"hoja.updated",label:"Hoja de ruta updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"{actor_name} updated Hoja de ruta"},"flex.folders.created":{code:"flex.folders.created",label:"Flex folders created",default_visibility:"job_participants",severity:"success",toast_enabled:!0,template:"Flex folders created: {folder}"},"flex.crew.updated":{code:"flex.crew.updated",label:"Flex crew updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"Crew synced to Flex"},"staffing.availability.sent":{code:"staffing.availability.sent",label:"Availability request sent",default_visibility:"management",severity:"info",toast_enabled:!1,template:"Sent availability request to {tech_name}"},"staffing.availability.confirmed":{code:"staffing.availability.confirmed",label:"Availability confirmed",default_visibility:"management",severity:"success",toast_enabled:!0,template:"{tech_name} confirmed availability"},"staffing.availability.declined":{code:"staffing.availability.declined",label:"Availability declined",default_visibility:"management",severity:"warn",toast_enabled:!0,template:"{tech_name} declined availability"},"staffing.offer.sent":{code:"staffing.offer.sent",label:"Offer email sent",default_visibility:"management",severity:"info",toast_enabled:!1,template:"Offer sent to {tech_name}"},"staffing.offer.confirmed":{code:"staffing.offer.confirmed",label:"Offer accepted",default_visibility:"job_participants",severity:"success",toast_enabled:!0,template:"{tech_name} accepted offer"},"staffing.offer.declined":{code:"staffing.offer.declined",label:"Offer declined",default_visibility:"management",severity:"warn",toast_enabled:!0,template:"{tech_name} declined offer"},"assignment.created":{code:"assignment.created",label:"Assignment created",default_visibility:"job_participants",severity:"success",toast_enabled:!0,template:"{actor_name} assigned {tech_name}"},"assignment.updated":{code:"assignment.updated",label:"Assignment updated",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"Assignment updated for {tech_name}"},"assignment.removed":{code:"assignment.removed",label:"Assignment removed",default_visibility:"job_participants",severity:"warn",toast_enabled:!0,template:"{actor_name} removed {tech_name}"},"timesheet.submitted":{code:"timesheet.submitted",label:"Timesheet submitted",default_visibility:"management",severity:"info",toast_enabled:!0,template:"{actor_name} submitted timesheet"},"timesheet.approved":{code:"timesheet.approved",label:"Timesheet approved",default_visibility:"job_participants",severity:"success",toast_enabled:!0,template:"Timesheet approved"},"timesheet.rejected":{code:"timesheet.rejected",label:"Timesheet rejected",default_visibility:"management",severity:"warn",toast_enabled:!0,template:"Timesheet rejected"},"announcement.posted":{code:"announcement.posted",label:"Announcement posted",default_visibility:"job_participants",severity:"info",toast_enabled:!0,template:"{title}"},"calendar.exported":{code:"calendar.exported",label:"Calendar exported",default_visibility:"management",severity:"info",toast_enabled:!1,template:"Calendar export generated"},"availability.unavailable.created":{code:"availability.unavailable.created",label:"Marked unavailable",default_visibility:"management",severity:"info",toast_enabled:!0,template:"{actor_name} marked unavailable"},"availability.unavailable.updated":{code:"availability.unavailable.updated",label:"Updated unavailable",default_visibility:"management",severity:"info",toast_enabled:!1,template:"{actor_name} updated unavailability"},"availability.unavailable.deleted":{code:"availability.unavailable.deleted",label:"Removed unavailable",default_visibility:"management",severity:"warn",toast_enabled:!0,template:"{actor_name} removed unavailability"}};function r(e){return s[e]}async function b({jobId:e,limit:i=30,lt:t}){let a=d.from("activity_log").select("*").order("created_at",{ascending:!1}).limit(i);e&&(a=a.eq("job_id",e)),t&&(a=a.lt("created_at",t));const{data:n,error:l}=await a;if(l)throw l;return n??[]}async function c(e){const{data:i,error:t}=await d.from("activity_prefs").select("*").eq("user_id",e).maybeSingle();if(t&&t.code!=="PGRST116")throw t;return i??null}export{c as a,r as g,b as l};
