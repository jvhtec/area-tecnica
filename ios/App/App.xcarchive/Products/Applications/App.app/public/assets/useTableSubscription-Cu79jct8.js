import{a8 as y,r as s,c7 as C,c8 as g}from"./index-NZ6jJLfQ.js";function E(e,m){const{connectionStatus:i,activeSubscriptions:c,lastRefreshTime:n,refreshSubscriptions:o,subscriptionsByTable:r}=y(),[a,u]=s.useState(!1),[S,f]=s.useState(!1),[b,l]=s.useState(Date.now());return s.useEffect(()=>{const t=r[e]||[];u(t.length>0&&i==="connected");const p=Date.now(),h=300*1e3;f(p-n>h),t.length>0&&l(n)},[e,c,i,n,r]),{isSubscribed:a,isStale:S,lastActivity:b,refreshSubscription:async()=>{try{return C()!=="CONNECTED"&&await g([e]),o(),!0}catch{return!1}}}}export{E as u};
