import{aM as w,c as S,r as t,j as e}from"./index-NZ6jJLfQ.js";import{S as j,W as y,e as N}from"./WallboardDisplay-Dv2df3UN.js";import"./vite-preload-helper-ckwbz45p.js";import"./commonjs-helpers-Cpj98o6Y.js";import"./announcementLevels-BJlHb9ui.js";import"./mic-l4q2dREA.js";import"./moon-Bp9lP4EQ.js";import"./star-icpn3ybK.js";import"./wrench-DzMvZxmF.js";import"./plane-NSG-_bNT.js";import"./transportProviders-CPS1W6Xy.js";function q(){const{token:l,presetSlug:u}=w(),h=S(),[A,n]=t.useState(!0),[m,i]=t.useState(!1),[p,c]=t.useState(null),[d,x]=t.useState(!0),[s,o]=t.useState(!1),[b,f]=t.useState(null),g=()=>{s&&x(!1)};t.useEffect(()=>{},[s,d]),t.useEffect(()=>{(async()=>{if(!l){c("No token provided"),n(!1),o(!0);return}try{const a=await N(l,u);f(a.token),i(!0),n(!1),o(!0)}catch(a){c(`Failed to initialize wallboard session: ${(a==null?void 0:a.message)||"Unknown error"}. Please refresh your shared link.`),i(!1),n(!1),o(!0)}})()},[l]);const k=r=>{c(r||"Access token expired or invalid. Please request a new wallboard link."),i(!1),o(!0)};if(!m&&p&&s)return e.jsx("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-8",children:e.jsx("div",{className:"max-w-md w-full space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"/sector pro logo.png",alt:"Sector-Pro",width:794,height:100,loading:"eager",decoding:"async",className:"w-48 mx-auto mb-6",onError:r=>{const a=r.target;a.src="/lovable-uploads/ce3ff31a-4cc5-43c8-b5bb-a4056d3735e4.png"}}),e.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-zinc-400 mb-6",children:p||"Invalid or expired access token. Please contact your administrator for a valid wallboard link."}),e.jsx("button",{onClick:()=>h("/"),className:"px-6 py-3 bg-white text-black rounded hover:bg-zinc-200 transition-colors",children:"Return to Home"})]})})});const v=s&&m;return e.jsxs(e.Fragment,{children:[d&&e.jsx(j,{onComplete:g}),v&&e.jsx("div",{style:{visibility:d?"hidden":"visible"},children:e.jsx(y,{presetSlug:u,skipSplash:!0,wallboardApiToken:b??void 0,onFatalError:k})})]})}export{q as default};
