import{c as m,u as o,r as u,g as x,j as e}from"./index-NZ6jJLfQ.js";import{u as f}from"./useQuery-kdg2pmgf.js";import{g as h,l as v}from"./api-Caml4zFF.js";import"./vite-preload-helper-ckwbz45p.js";import"./commonjs-helpers-Cpj98o6Y.js";function b(){const r=m(),{userRole:s,isLoading:a}=o();u.useEffect(()=>{if(!a&&s&&!["admin","management"].includes(s)){const t=x(s);r(t,{replace:!0})}},[s,a,r]);const{data:d=[],isLoading:n,error:c,refetch:l}=f({queryKey:["activity","all"],queryFn:()=>v({limit:50})});return a?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-gray-900 dark:border-white"})}):!s||!["admin","management"].includes(s)?null:e.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Activity"}),e.jsx("button",{className:"text-sm underline",onClick:()=>l(),children:"Refresh"})]}),n&&e.jsx("div",{className:"text-muted-foreground",children:"Loadingâ€¦"}),c&&e.jsx("div",{className:"text-red-600 text-sm",children:"Failed to load activity"}),e.jsxs("div",{className:"space-y-2",children:[d.map(t=>{const i=h(t.code);return e.jsxs("div",{className:"border rounded-md p-3",children:[e.jsx("div",{className:"text-sm font-medium",children:(i==null?void 0:i.label)||t.code}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(t.created_at).toLocaleString()}),t.payload&&e.jsx("pre",{className:"text-xs mt-2 bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(t.payload,null,2)})]},t.id)}),d.length===0&&!n&&e.jsx("div",{className:"text-muted-foreground",children:"No recent activity."})]})]})}export{b as default};
