import{u as q}from"./useQuery-kdg2pmgf.js";import{f as y,e as f,s as n}from"./index-NZ6jJLfQ.js";import{u as o}from"./useMutation-DluhVBs1.js";const v=()=>{const i=y(),{toast:r}=f(),{data:m=[],isLoading:l,error:p}=q({queryKey:["equipment-models"],queryFn:async()=>{const{data:e,error:t}=await n.from("equipment").select("*").eq("department","sound").order("category",{ascending:!0}).order("name",{ascending:!0});if(t)throw t;return e}}),a=o({mutationFn:async e=>{const{data:t,error:s}=await n.from("equipment").insert([{...e,department:"sound"}]).select().single();if(s)throw s;return t},onSuccess:()=>{i.invalidateQueries({queryKey:["equipment-models"]}),r({title:"Success",description:"Equipment model created successfully"})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}}),u=o({mutationFn:async({id:e,...t})=>{const{data:s,error:c}=await n.from("equipment").update(t).eq("id",e).eq("department","sound").select().single();if(c)throw c;return s},onSuccess:()=>{i.invalidateQueries({queryKey:["equipment-models"]}),r({title:"Success",description:"Equipment model updated successfully"})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}}),d=o({mutationFn:async e=>{const{error:t}=await n.from("equipment").delete().eq("id",e).eq("department","sound");if(t)throw t},onSuccess:()=>{i.invalidateQueries({queryKey:["equipment-models"]}),r({title:"Success",description:"Equipment model deleted successfully"})},onError:e=>{r({title:"Error",description:e.message,variant:"destructive"})}});return{models:m,isLoading:l,error:p,createModel:a.mutate,updateModel:u.mutate,deleteModel:d.mutate,isCreating:a.isPending,isUpdating:u.isPending,isDeleting:d.isPending}};export{v as u};
