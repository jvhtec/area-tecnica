import{u as S}from"./useQuery-kdg2pmgf.js";import{u as p}from"./useTableSubscription-Cu79jct8.js";import{r as a,a0 as g}from"./index-NZ6jJLfQ.js";function d(t,c,r,u){const[f,i]=a.useState(!1),[h,n]=a.useState(Date.now());Array.isArray(t)?t.map(s=>String(s)):String(t);const{isSubscribed:o,isStale:l}=p(r);a.useEffect(()=>{},[o,r]);const e=S({queryKey:t,queryFn:async()=>{try{const s=await c();return n(Date.now()),s}catch(s){throw s}},...u}),m=async()=>{i(!0);try{await e.refetch(),n(Date.now())}catch(s){throw g.error(`Failed to refresh ${r} data`,{description:"Please try again"}),s}finally{i(!1)}};return{...e,isSubscribed:o,isStale:l,isRefreshing:f||e.isFetching,manualRefresh:m,lastSuccessTime:h}}export{d as u};
