import{a8 as m,r as u}from"./index-NZ6jJLfQ.js";function h(e){const{forceSubscribe:a,subscriptionsByTable:i,connectionStatus:o,lastRefreshTime:n}=m(),b=u.useMemo(()=>JSON.stringify(e),[e]);u.useEffect(()=>{try{const t=e.map(({table:s,queryKey:c,priority:r})=>({table:s,queryKey:c,priority:r}));a(t)}catch{}},[a,b]);const f=u.useMemo(()=>{const t=Date.now(),s=300*1e3;return e.reduce((c,{table:r})=>{var S;const l=(((S=i[r])==null?void 0:S.length)??0)>0&&o==="connected";return c[r]={isSubscribed:l,isStale:t-n>s,lastActivity:n},c},{})},[o,n,i,e]),p=o==="connected"&&e.every(({table:t})=>{var s;return(((s=i[t])==null?void 0:s.length)??0)>0}),d=Date.now()-n>300*1e3;return{isSubscribed:p,isStale:d,tableStatuses:f,refreshSubscription:async()=>!0}}export{h as u};
