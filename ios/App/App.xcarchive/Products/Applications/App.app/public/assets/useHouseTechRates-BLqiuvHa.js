import{u as c}from"./useQuery-kdg2pmgf.js";import{f as y,n as o,m as a}from"./index-NZ6jJLfQ.js";import{u}from"./useMutation-DluhVBs1.js";import{R as i}from"./ratesQueryKeys-DgMsgg6U.js";function l(t){return c({queryKey:i.houseTechRate(t),queryFn:async()=>{const{data:r,error:e}=await a.from("custom_tech_rates").select("*").eq("profile_id",t).maybeSingle();if(e)throw e;return r},enabled:!!t})}function f(){const t=y();return u({mutationFn:async r=>{const{data:e}=await a.auth.getUser();if(!e.user)throw new Error("Not authenticated");const{data:n,error:s}=await a.from("custom_tech_rates").upsert({...r,updated_by:e.user.id}).select().single();if(s)throw s;return n},onSuccess:(r,e)=>{t.invalidateQueries({queryKey:i.houseTechRate(e.profile_id)}),o.success("House tech rate saved successfully")},onError:r=>{o.error("Failed to save house tech rate")}})}function p(){return u({mutationFn:async({profileId:t,profileName:r})=>{const{error:e}=await a.rpc("log_activity",{_code:"settings.house_rate.updated",_job_id:null,_entity_type:"profile",_entity_id:t,_payload:{profile_name:r},_visibility:"management"});if(e)throw e}})}export{f as a,p as b,l as u};
